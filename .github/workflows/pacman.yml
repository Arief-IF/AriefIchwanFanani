name: Generate Contribution SVG

on:
  schedule:
    # Jalankan setiap 12 jam. Anda bisa ubah ini menjadi '0 */24 * * *' untuk harian
    - cron: '*/12 * * * *'
  workflow_dispatch:

jobs:
  generate-graph:
    permissions:
      contents: write # Izin untuk melakukan commit
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
        with:
          # Penting: Menggunakan GITHUB_TOKEN bawaan untuk checkout
          token: ${{ secrets.GITHUB_TOKEN }}

      # 1. Action untuk membuat SVG (menggantikan pacman bawaan)
      # Catatan: Action snk/snake ini juga bisa menghasilkan grafik Pac-Man.
      - name: Generate Snake/Pacman SVG
        uses: platane/snk/svg-only@v3
        with:
          github_user_name: ${{ github.repository_owner }}
          # Path Output: akan membuat file di folder dist/
          outputs: dist/pacman-contribution-graph.svg

      # 2. Action untuk melakukan Commit ke Branch Utama (main)
      - name: Commit and Push Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore(graph): update pacman svg"
          # Hanya commit file yang ada di folder dist/
          file_pattern: dist/pacman-contribution-graph.svg
